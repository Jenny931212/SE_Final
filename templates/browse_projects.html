{% extends "base.html" %}
{% block content %}
<style>
  /* 讓每一列只畫一條分隔線，線就會整齊 */
  table { border-collapse: collapse; }
  table th, table td { border-bottom: none; }             /* 覆蓋 base 的設定 */
  table tr { border-bottom: 1px solid #E6ECE8; }
  table tr:last-child { border-bottom: none; }

  /* 保持操作欄兩顆按鈕並排、對齊與不換行 */
  table td:last-child{
    display:flex;
    gap:10px;
    justify-content:center;
    align-items:center;
  }
  table td:last-child a.btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding: 10px 14px;
    white-space:nowrap;
    text-align:center;
  }
</style>

<h2>公開案件</h2>
<form method="get" action="/browse" style="margin: 10px 0 16px 0; display:flex; gap:8px; align-items:center;">
  <input name="q" value="{{ q }}" placeholder="搜尋標題或描述…" 
         style="flex:1; padding:8px; border:1px solid #C8D7CF; border-radius:8px; font-size:16px;">
  <button class="btn" type="submit" style="width:90px;">搜尋</button>
  <a class="btn" href="/browse" style="width:90px; text-align:center;">清除</a>
</form>
<table>
  <tr><th>#</th><th>標題</th><th>描述</th><th>操作</th></tr>
  {% for p in projects %}
  <tr>
    <td>{{ loop.index }}</td>
    <td>{{ p.title }}</td>
    <td>{{ (p.description[:80] ~ ("..." if p.description|length > 80 else "")) }}</td>
    <td style="display:flex; gap:10px; justify-content:left; align-items:center;">
      <a class="btn" href="/projects/{{ p.id }}" >查看</a>
      <a class="btn" href="/projects/{{ p.id }}/propose" >去接下</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
